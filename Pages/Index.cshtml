@page
@model IndexModel
@{
  ViewData["Title"] = "Home";
  @* Layout = "_LayoutLanding"; *@
}
<header class="banner position-relative img-bottom mb-3">
  <img src="/images/home_splash3.jpg" alt="">

  <form class="border position-absolute shadow p-5 search">
    <h2>Refresh your surroundings</h2>
    <p>Live wherever you want, whenever you want. Book a home on Swapartment.</p>
    <div class="form-floating mb-3">
      <input type="text" class="form-control searchlocation" id="floatingInput" placeholder="Canada">
      <label for="floatingInput">Location</label>
    </div>
    <div class="form-floating mb-3">
      <div class="row g-2">
        <div class="col-md">
          <div class="form-floating">
            <input type="date" class="form-control" id="floatingInputGrid" value="2022-11-06" min="2022-11-06"
              max="2023-11-06">
            <label for="floatingInputGrid">Check in</label>
          </div>
        </div>
        <div class="col-md">
          <div class="form-floating">
            <input type="date" class="form-control" id="floatingInputGrid" value="2022-11-07" min="2022-11-07"
              max="2023-11-07">
            <label for="floatingInputGrid">Check out</label>
          </div>
        </div>
      </div>
    </div>
    <div class="form-floating mb-3">
      <input type="number" class="form-control" id="floatingInput" placeholder="1" min="1" max="50">
      <label for="floatingInput">Guests</label>
    </div>
    <div class="d-grid">
      @* Temporary - For testing purposes *@
      <button type="submit" class="btn btn-primary btn-lg" asp-page="/SearchResults">
        <i class="bi bi-search"></i>
        Search
      </button>
    </div>
  </form>
</header>

<h2>Example Listings</h2>
<div class="card-grid">
  @foreach (var item in Model.Property)
  {
    @* Card start *@
    <a asp-area="" asp-page="./Properties/Details" asp-route-id="@item.Id">
      <div class="card mb-3">
        <div id="carousel0" class="carousel slide">
          <div class="carousel-inner">
            <div class="carousel-item active">
              <img src="/images/home_splash.jpg" class="d-block w-100 card-img-top" alt="...">
            </div>
            <div class="carousel-item">
              <img src="/images/home_splash2.jpg" class="d-block w-100 card-img-top" alt="...">
            </div>
            <div class="carousel-item">
              <img src="/images/home_splash3.jpg" class="d-block w-100 card-img-top" alt="...">
            </div>
          </div>
          <button class="carousel-control-prev" type="button" data-bs-target="#carousel0" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#carousel0" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
          </button>
        </div>

        <div class="card-body">
          <div class="d-flex justify-content-between">
            <p class="card-title">@Html.DisplayFor(modelItem => item.City), @Html.DisplayFor(modelItem => item.State),
              @Html.DisplayFor(modelItem => item.Country)</p>
            <p class="card-text"><i class="bi bi-star-fill"></i> 4.8</p>
          </div>

          <p class="card-text text-muted">@Html.DisplayFor(modelItem => item.Title)</p>
          <p class="card-text text-muted">@Html.DisplayFor(modelItem => item.NumberOfBedrooms) Bedrooms</p>
          <p class="card-text">@Html.DisplayFor(modelItem => item.DailyRate) <small class="text-muted">per night</small>
          </p>
        </div>



      </div>
    </a>
    @* Card end *@
  }


</div>

<script>

  const searchlocation = document.querySelector(".searchlocation");
  const form = document.querySelector(".search");

  function setSearchInStorage(event) {
    localStorage.setItem('searchlocation', `${searchlocation.value}`);
  }

  form.addEventListener('submit', setSearchInStorage);

</script>
